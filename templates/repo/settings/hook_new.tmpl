{{template "ng/base/head" .}}
{{template "ng/base/header" .}}
<div id="repo-wrapper">
    {{template "repo/header" .}}
	<div id="setting-wrapper" class="main-wrapper">
	    <div id="repo-setting" class="container clear">
	        {{template "repo/settings/nav" .}}
	        <div class="grid-4-5 left">
	            <div class="setting-content">
	                {{template "ng/base/alert" .}}
	                <div id="setting-content">
	                    <div id="repo-hooks-panel" class="panel panel-radius">
	                        <div class="panel-header">
	                        	<strong>{{if .PageIsSettingsHooksNew}}{{.i18n.Tr "repo.settings.add_webhook"}}{{else}}{{.i18n.Tr "repo.settings.update_webhook"}}{{end}}</strong>
	                        </div>
	                        <form class="form form-align panel-body" id="repo-setting-form" action="{{.RepoLink}}/settings/hooks/{{if .PageIsSettingsHooksNew}}new{{else}}{{.Webhook.Id}}{{end}}" method="post">
	                            {{.CsrfTokenHtml}}
                        		<div class="text-center panel-desc">{{.i18n.Tr "repo.settings.add_webhook_desc" | Str2html}}</div>
	                            <div class="field">
	                                <label class="req" for="payload-url">{{.i18n.Tr "repo.settings.payload_url"}}</label>
	                                <input class="ipt ipt-large ipt-radius {{if .Err_UserName}}ipt-error{{end}}" id="payload-url" name="payload_url" type="url" value="{{.Webhook.Url}}" required />
	                            </div>
					            <div class="field">
					                <label class="req">{{.i18n.Tr "repo.settings.content_type"}}</label>
					                <select name="content_type">
                                		<option value="1" {{if or .PageIsSettingsHooksNew (eq .Webhook.ContentType 1)}}selected{{end}}>application/json</option>
                                		<option value="2" {{if eq .Webhook.ContentType 2}}selected{{end}}>application/x-www-form-urlencoded</option>
					                </select>
					            </div>
	                            <div class="field">
	                                <label for="secret">{{.i18n.Tr "repo.settings.secret"}}</label>
	                                <input class="ipt ipt-large ipt-radius {{if .Err_UserName}}ipt-error{{end}}" id="secret" name="secret" type="password" value="{{.Webhook.Secret}}" autocomplete="off" />
	                            </div>
								<div class="field">
									<h4 class="text-center">{{.i18n.Tr "repo.settings.event_desc"}}</h4>
									<label></label>
	                                <input name="push_only" type="radio" {{if or .PageIsSettingsHooksNew .Webhook.PushOnly}}checked{{end}}> {{.i18n.Tr "repo.settings.event_push_only" | Str2html}}
	                            </div>
					            <div class="field">
					                <label for="active">{{.i18n.Tr "repo.settings.active"}}</label>
					                <input class="ipt-chk" id="active" name="active" type="checkbox" {{if or .PageIsSettingsHooksNew .Webhook.IsActive}}checked{{end}} />
					                <span>{{.i18n.Tr "repo.settings.active_helper"}}</span>
					            </div>
	                            <div class="field">
	                                <label></label>
	                                <button class="btn btn-green btn-large btn-radius">{{if .PageIsSettingsHooksNew}}{{.i18n.Tr "repo.settings.add_webhook"}}{{else}}{{.i18n.Tr "repo.settings.update_webhook"}}{{end}}</button>
	                                {{if .PageIsSettingsHooksEdit}}<a class="btn btn-red btn-large btn-link btn-radius" href="{{.RepoLink}}/settings/hooks?remove={{.Webhook.Id}}"><strong>{{.i18n.Tr "repo.settings.delete_webhook"}}</strong></a>{{end}}
	                            </div>
							</form>
	                    </div>
	                </div>
		            <br>
	                <div id="setting-content">
	                    <div id="repo-hooks-history-panel" class="panel panel-radius">
	                        <div class="panel-header">
	                        	<strong>{{.i18n.Tr "repo.settings.recent_deliveries"}}</strong>
	                        </div>
	                        <ul class="panel-body setting-list">
                            	<li>Coming soon!</li>
	                        </ul>
	                    </div>
		            </div>
	            </div>
	        </div>
		</div>
	</div>
</div>
{{template "ng/base/footer" .}}